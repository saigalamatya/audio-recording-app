<div class="container-fluid">

  <!-- <div class="wrapper" #wrapper> -->
  <div class="btn-group mt-2 mb-2">
    <button *ngIf="!isRecording" type="button" class="btn btn-primary" (click)="startRecording()">Record</button>&nbsp;
    <button *ngIf="isRecording" type="button" class="btn btn-danger" (click)="stopRecording()">Stop</button>
  </div>
  <div class="row">
    <canvas class="visualizer ml-3" width="640" height="100" #myCanvas></canvas>
  </div>

  <div class="row">
    <!-- <canvas class="sine-wave-visualizer" width="300" height="100"></canvas> -->
    <div id="waveform"></div>

    <div class="waveform-container">
      <div class="zoom-view-container"></div>
      <div class="overview-container"></div>
    </div>
    <!-- </div> -->
  </div>

  <div class="row">
    <label class="ml-3">Pitch: {{pitch.toFixed(2)}}Hz</label>
    <div *ngIf="recordCompleted">
      <div class="form-group form-check">
        <button type="button" class="btn btn-primary" (click)="togglePitchDisplay()">
          {{pitchShowHideText}} </button>
      </div>
    </div>
  </div>

  <div class="alert alert-warning alert-dismissible fade show" role="alert">
    <strong>Welcome!</strong> For the time being the recording length is set to 10 seconds max.
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>

  <!-- <div id="chartdiv" style="width: 100%; height: 500px"></div> -->

  <div class="control-section" *ngIf="recordCompleted">
    <!-- <div class="row">
      Average pitch of selected range: {{rangeAverage}} Hz
      <button type="button" class="btn btn-success" (click)="addToRollingAverage()">Add to Rolling Average</button>
      <input type="number" class="form-control col-sm-3" name="rangeSize" [(ngModel)]="rangeSize"
        placeholder="Enter range size" (change)="changeRangeSize($event)">
    </div> -->
    <form>
      <div class="form-group row">
        <label for="startingPoint" class="col-sm-2 col-form-label">Starting Point:</label>
        <div class="col-sm-3">
          <input type="text" class="form-control" name="startingPoint" [(ngModel)]="startingPoint"
            (change)="changeStartingPoint($event)" placeholder="Enter starting point..." tabindex="1">
        </div>
      </div>
      <div class="form-group row">
        <label for="range" class="col-sm-2 col-form-label">Range: </label>
        <div class="col-sm-3">
          <input type="text" class="form-control" name="range" [(ngModel)]="rangeSize"
            (change)="changeRangeSize($event)" placeholder="Enter range..." [readonly]="!startingPointEntered"
            [title]="!startingPointEntered ? 'Please enter starting point before entering range.': ''" tabindex="2">
        </div>
      </div>

      <button *ngIf="rangeSize" type="button" class="btn btn-primary" (click)="calculateRollingAverage()">Generate
        Rolling
        Average</button>
    </form>
    <label>Pitch Chart</label>
    <br />
    <div class="row" align="center">
      <!-- <div align="center">
        <ejs-rangenavigator style='display:block' align='center' id='containerDouble' [value]='rangeValue'
          labelPosition='Outside' [width]='width' (changed)='changed($event)' [theme]='theme' [tooltip]='tooltip'
          (tooltipRender)='tooltipRender($event)' (load)='load($event)'>
          <e-rangenavigator-series-collection>
            <e-rangenavigator-series [dataSource]='dataSource' xName='x' yName='y' width=2 name='SL'>
            </e-rangenavigator-series>
          </e-rangenavigator-series-collection>
        </ejs-rangenavigator>
      </div> -->
      <div align="center">
        <ejs-chart #chartDouble style='display:block;' id='chartDouble' align='center' [chartArea]='chartArea'
          [width]='width' [primaryXAxis]='primaryXAxis' [primaryYAxis]='primaryYAxis' height='350' [theme]='theme'
          [tooltip]='tooltip' [annotations]='annotations' [legendSettings]='legendSettings'
          (axisLabelRender)='axisLabelRender($event)'>
          <e-series-collection>
            <e-series [dataSource]='dataSource' name='Pitch' type='Spline' xName='x' yName='y' width='2'
              [marker]="marker" [animation]='animation'>
            </e-series>
          </e-series-collection>
        </ejs-chart>
      </div>
    </div>
    <label>Rolling Average Chart</label>
    <br />
    <div class="row">
      <div align="center">
        <ejs-chart #rollingAverageChart style='display:block;' id='rollingAverageChart' align='center'
          [chartArea]='chartArea' [width]='width' [primaryXAxis]='primaryXAxis' [primaryYAxis]='primaryYAxis'
          height='350' [theme]='theme' [tooltip]='tooltip' [annotations]='annotations'
          (axisLabelRender)='axisLabelRender($event)'>
          <e-series-collection>
            <e-series [dataSource]='rollingAverageDataSource' name='Pitch' type='Spline' xName='x' yName='y' width='2'
              [marker]="marker" [animation]='animation'>
            </e-series>
          </e-series-collection>
        </ejs-chart>
      </div>
    </div>
  </div>
</div>